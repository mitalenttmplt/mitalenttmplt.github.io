document.addEventListener("DOMContentLoaded",function(){svg4everybody(),barbaNavigation()});function makeMainScreenSlider(a){var b=a;console.log(b);var c=new Swiper(".main-slider",{speed:1e3,direction:"vertical",initialSlide:b,watchSlidesProgress:!0,mousewheel:{invert:!0},keyboard:{enabled:!0,onlyInViewport:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar",draggable:!0},on:{imagesReady:function(){this.el.classList.remove("loading")},progress:function(){for(var a=this,b=0;b<a.slides.length;b++){var c=a.slides[b].progress,d=a.width*.5;a.slides[b].querySelector(".slide-bgimg").style.transform="translate3d("+-(c*d)/2+"px, 0, 0)"}},touchStart:function(){for(var a=this,b=0;b<a.slides.length;b++)a.slides[b].style.transition=""},setTransition:function(a){for(var b=this,c=0;c<b.slides.length;c++)b.slides[c].style.transition=a+"ms",b.slides[c].querySelector(".slide-bgimg").style.transition=1.5*a+"ms"}}}),d=new Swiper(".nav-slider",{loopAdditionalSlides:10,speed:1e3,initialSlide:b,direction:"vertical",slidesPerView:5,spaceBetween:20,centeredSlides:!0,touchRatio:.2,slideToClickedSlide:!0,on:{imagesReady:function(){document.querySelector(".swiper-nav-wrap").classList.remove("loading")},click:function(){c.autoplay.stop()}}});c.controller.control=d,d.controller.control=c}function makeCustomCursor(){var a=-100,b=-100,c=document.querySelector(".cursor");c.style.cssText="transform: translate("+a+"px,"+b+"px)";"ontouchstart"in document.documentElement?c.style.display="none":(function(){document.addEventListener("mousemove",function(c){a=c.clientX,b=c.clientY});var d=function(){c.style.cssText="transform: translate("+a+"px,"+b+"px)",requestAnimationFrame(d)};requestAnimationFrame(d)}(),function(){var a=function(a){var b=a.currentTarget;c.classList.add("cursor_"+b.getAttribute("data-cursor")),isStuck=!0},b=function(){c.className="",c.classList.add("cursor"),isStuck=!1},d=document.querySelectorAll(".interactive");[].forEach.call(d,function(c){c.addEventListener("mouseenter",a),c.addEventListener("mouseleave",b)})}())}function makeNavigation(){function a(){b=$(window).width();var a=new TimelineMax({onStart:function(){d.classList.remove("main-nav_show")}});a.to(d,.5,{x:1.2*b,opacity:0},"+=1")}var b,c=document.getElementById("toggle-navigation-btn"),d=document.getElementById("main-nav"),e=d.querySelectorAll(".main-nav__item-wrap"),f=document.querySelector(".main-nav__close-btn");c.onclick=function(){var a=new TimelineMax({onComplete:function(){d.classList.add("main-nav_show")}});a.to(d,.5,{x:0,opacity:1})},f.addEventListener("click",a),[].forEach.call(e,function(b){b.addEventListener("click",a)})}function makePortfolioSlider(){$(".js-portfolio-slider ").slick({infinite:!0,slidesToShow:4,slidesToScroll:1,arrows:!1,dots:!0,responsive:[{breakpoint:600,settings:{slidesToShow:3}},{breakpoint:400,settings:{slidesToShow:2}},{breakpoint:350,settings:{slidesToShow:1}}]})}function makeMediaLinksSlider(){$(".js-medialinks-slider").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,arrows:!1,dots:!0,responsive:[{breakpoint:800,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})}function customVideoControls(){var a=document.getElementById("video"),b=document.getElementById("playBtn"),c=document.getElementById("pauseBtn"),d=document.querySelector(".video__poster");a.controls=!1,b.onclick=function(){d.classList.add("video__poster_hidden"),this.classList.add("video__playBtn_hidden"),c.classList.remove("video__pauseBtn_hidden"),a.play()},c.onclick=function(){d.classList.remove("video__poster_hidden"),this.classList.add("video__pauseBtn_hidden"),b.classList.remove("video__playBtn_hidden"),a.pause()}}function appendVideoSrcBySize(){var a=$("#video");600>=$(window).width()?a.append("<source type='video/mp4' src='static/video/testimonials-video-xs.mp4' />"):a.append("<source type='video/mp4' src='static/video/testimonials-video-lg.mp4' />")}function showSearchForm(){var a=document.querySelectorAll(".search-form");[].forEach.call(a,function(a){var b=a.querySelector(".search-form__overlay");b&&(b.onclick=function(){a.classList.add("search-form_visible")})})}function showMorePics(){var a=$(".portfolio__item"),b=$("#showMore");600<$(window).width()?($(a).show(),$(b).hide()):($(a).slice(0,4).show(),$(b).click(function(){$(".portfolio__item:hidden").slice(0,4).show("slow"),0==$(".portfolio__item:hidden").length&&$("#showMore").hide("slow")}))}function barbaNavigation(){var a,b,c,d,e,f,g,h,i,j,k,l=0;Barba.Dispatcher.on("linkClicked",function(b){a=b,i=document.querySelector(".barba-overlay")});var m=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.zoom()]).then(this.showNewPage.bind(this))},zoom:function(){var m=Barba.Utils.deferred(),n=new TimelineMax({onComplete:function(){m.resolve()}});if($(a).hasClass("swiper-link")){for(var o=a;!o.classList.contains("swiper-slide");)o=o.parentNode;document.body.style.overflow="hidden",b=o,l=b.getAttribute("data-slide"),e=b.querySelector(".content"),f=b.querySelector(".caption"),g=b.querySelector(".slide-bgimg"),h=document.querySelector(".swiper-scrollbar"),c=document.querySelector(".mainSlider__social"),d=document.querySelector(".mainSlider__navWrap"),j=$(window).width(),k=$(window).height(),n.to(c,.9,{ease:Expo.easeOut,left:-(5*(j/100))},0).to(d,.9,{ease:Expo.easeOut,x:100,opacity:0},0).to(h,1,{opacity:0},0).to(f,.3,{y:20,opacity:0}).to(e,.7,{top:51,scale:1.3,left:16*(j/100)}).to(a,.5,{opacity:0}).to(g,1,{top:104,width:70*(j/100),height:39.37*(j/100),left:15*(j/100)},"-=.2")}else i.classList.add("barba-overlay_moveToTop"),i.style.visibility="visible",n.to(i,1.3,{scaleY:1,trasformOrigin:"50% top"});return m.promise},showNewPage:function(){var a=new TimelineMax({onComplete:function(){i.style.visibility="hidden"}});document.body.style.overflow="auto",i&&(i.classList.remove("barba-overlay_moveToTop"),a.fromTo(i,1.3,{scaleY:1},{scaleY:0})),this.done()}}),n=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.zoom()]).then(this.showNewPage.bind(this))},zoom:function(){var a=Barba.Utils.deferred();container=document.querySelector(".barba-container");var b=new TimelineMax({onComplete:function(){a.resolve()}});return b.to(container,.8,{opacity:0}),a.promise},showNewPage:function(){this.done()}});Barba.Pjax.getTransition=function(){var a=m;return"profile"===Barba.HistoryManager.prevStatus().namespace?a=n:l=0,a};var o=Barba.BaseView.extend({namespace:"profile",onEnterCompleted:function(){makeCustomCursor(),customVideoControls(),appendVideoSrcBySize(),makePortfolioSlider(),showSearchForm(),makeNavigation(),AOS.init()}}),p=Barba.BaseView.extend({namespace:"mainPage",onEnterCompleted:function(){makeCustomCursor(),makeMainScreenSlider(l),makeNavigation(),showSearchForm(),AOS.init()}}),q=Barba.BaseView.extend({namespace:"news",onEnterCompleted:function(){makeCustomCursor(),showSearchForm(),AOS.init(),makeNavigation(),showMorePics()}}),r=Barba.BaseView.extend({namespace:"blog",onEnterCompleted:function(){makeCustomCursor(),showSearchForm(),makeNavigation(),customVideoControls(),appendVideoSrcBySize(),makeMediaLinksSlider()}}),s=Barba.BaseView.extend({namespace:"contacts",onEnterCompleted:function(){makeCustomCursor(),makeNavigation(),showSearchForm(),AOS.init()}});o.init(),p.init(),q.init(),r.init(),s.init(),Barba.Pjax.start()}
